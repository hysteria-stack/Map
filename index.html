<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Interactive Map with Draw + Clipboard</title>

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css" />
  
  <style>
    html, body, #map {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    #copy-notice {
      position: absolute;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      background-color: #4caf50;
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      font-family: sans-serif;
      display: none;
      z-index: 1000;
    }

    .leaflet-div-icon {
      width: 3px !important;
      height: 3px !important;
      margin-left: -2px !important;
      margin-top: -2px !important;
      border-radius: 2px !important;
      border: 1px solid #000;
      background: #fff;
    }
  </style>
</head>
<body>

<div id="copy-notice">Coordinates copied to clipboard!</div>
<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>
  
<script>
  var map = L.map('map').setView([1.2966, 103.7764], 16);
  
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap contributors'
  }).addTo(map);
  
  L.control.scale().addTo(map);
  const COLOR_GREEN = '#2cff05';   // Not stressful
  const COLOR_YELLOW = '#FFFF00';  // Slightly stressful
  const COLOR_RED = '#F54927';     // Very stressful
  const COLOR_MOUSEOVER = '#ff7800' 

  function generateStressBar(rating, total = 5) {
    let color;
  
    if (rating === 1) {
      color = COLOR_GREEN;
    } else if (rating >= 4) {
      color = COLOR_RED;
    } else {
      color = COLOR_YELLOW;
    }
    let bar = '';
  
    for (let i = 0; i < total; i++) {
      bar += `<span style="
        display:inline-block;
        width:15px;
        height:15px;
        background:${i < rating ? color : '#ccc'};
        margin-right:2px;
        border-radius:2px;
        border:1px solid #000;  /* black border for all blocks */
      "></span>`;
    }
  
    return bar;
  }
  //NUS Business School
  var unshadedPolygon = L.polygon([
  [1.2939539200158, 103.77450490046742],
  [1.2933800735911294, 103.7747408887727],
  [1.2930851057522408, 103.77556684784096],
  [1.2932835386658021, 103.7756312082878],
  [1.2935302390231982, 103.77492324337216],
  [1.294023639666046, 103.77469261843753]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);
  
  //School of Computing
  var unshadedPolygon1 = L.polygon([
  [1.2951874212368448, 103.77367913622614],
  [1.2950265298072667, 103.7734860548855],
  [1.294543855457262, 103.77389367104904],
  [1.294570670701339, 103.77392585127248],
  [1.2944634097233259, 103.77402239194278],
  [1.2940772701649124, 103.7738614908256],
  [1.2932728125627617, 103.7742262000246],
  [1.29334789528309, 103.77440855462406],
  [1.2938252068103455, 103.77419401980114],
  [1.2940558179654982, 103.77406529890742],
  [1.2943829639868454, 103.7741618395777],
  [1.2939753722160918, 103.77435492091834],
  [1.2940826332147404, 103.77455336562956],
  [1.2941738050600244, 103.77452118540613],
  [1.294205983357581, 103.7745640923707],
  [1.2945224032617915, 103.77462308944699],
  [1.2946243011886407, 103.77470354000558],
  [1.294801281788695, 103.77506288583398],
  [1.2950426189506825, 103.77562603974417],
  [1.2954019431270465, 103.77557240603846],
  [1.2951927842843194, 103.77514869976315],
  [1.2950801602849251, 103.77492343819912],
  [1.2951981473317813, 103.77487516786394],
  [1.2950801602849251, 103.77458018248242],
  [1.2950587080939966, 103.7744407348475],
  [1.2951284277138495, 103.77421547328343],
  [1.2950050776158801, 103.7740974791308],
  [1.2954931149248892, 103.77367913622614],
  [1.2953804909388404, 103.77355577870293]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);

  //Faculty of Dentistry
  var unshadedPolygon2 = L.polygon([
  [1.297268282805197, 103.78156436880155],
  [1.2970913023775286, 103.78185935418307],
  [1.2968660545425894, 103.78207388900597],
  [1.2968767806304267, 103.78209534248826],
  [1.2967266153966337, 103.78207388900597],
  [1.2966354436432042, 103.78195053148282],
  [1.2966568958207743, 103.78183790070075],
  [1.2968660545425894, 103.78136056071976],
  [1.2972414675896684, 103.78151073509584]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);
  
  //University town
  var unshadedPolygon3 = L.polygon([
  [1.3088470662309069, 103.77269147159396],
  [1.3084716549132482, 103.7736676050383],
  [1.3079997091770645, 103.77374269222632],
  [1.3077422841926345, 103.77365687829716],
  [1.3073775987528329, 103.77350203291934],
  [1.3060582951017796, 103.77430117513475],
  [1.3057740547935806, 103.7743065489799],
  [1.304696086540223, 103.7745470532633],
  [1.303762919619523, 103.77612383393388],
  [1.3032480687565708, 103.77401975863688],
  [1.3043421267144832, 103.77187441040762],
  [1.3049856899969619, 103.77169345311525],
  [1.3057150615180322, 103.77159691244493],
  [1.306776940265925, 103.77163981940953],
  [1.308761257934671, 103.7719616216439],
  [1.3088899703779118, 103.77206888905538],
  [1.308954326597045, 103.77234778432516]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);
  
  //Yong Siew Toh Conservatory of Music
  var unshadedPolygon4 = L.polygon([
  [1.3024865183288297, 103.77198917485876],
  [1.3022344558126062, 103.77206426204678],
  [1.3023631685900088, 103.77236997416945],
  [1.302239818845132, 103.77235924742833],
  [1.302271997040033, 103.7725255119161],
  [1.3023578055577374, 103.77249333169266],
  [1.3023953467833194, 103.77256841888068],
  [1.3017625089059528, 103.7727615002213],
  [1.3017732349729894, 103.77307257571455],
  [1.3024811552968383, 103.77331392739032],
  [1.3025669638074309, 103.7730779390851],
  [1.3025991419981462, 103.77286340426218],
  [1.3026152310933574, 103.77261668921584],
  [1.3025884159346084, 103.77235388405774]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);
  
  //Faculty of Arts and Social Sciences
  var unshadedPolygon5 = L.polygon([
  [1.2955735606261418, 103.77138329309908],
  [1.2953858539859207, 103.77082550255946],
  [1.2952088734266665, 103.77069141829512],
  [1.2950158037115926, 103.7706324212188],
  [1.294661842529079, 103.77064314795999],
  [1.2943883270360246, 103.77068605492455],
  [1.294050454915619, 103.77084695604175],
  [1.2937983915583933, 103.77112585131157],
  [1.2935892325833807, 103.77156564769855],
  [1.2935195129212138, 103.7720161708267],
  [1.2937179458008194, 103.77202689756783],
  [1.2937715763061486, 103.77175336566863],
  [1.294039728815823, 103.77185526970952],
  [1.2940075505161546, 103.7719947173444],
  [1.294050454915619, 103.7720805312736],
  [1.2942435247042277, 103.77213416497933],
  [1.294275703000881, 103.7720161708267],
  [1.2943400595930041, 103.77211271149704],
  [1.2944419575271813, 103.7720805312736],
  [1.294543855457262, 103.77202689756783],
  [1.2945224032617915, 103.77212343823817],
  [1.2945974859451361, 103.77216634520276],
  [1.294645753383246, 103.77216634520276],
  [1.2946940208204398, 103.77224679576132],
  [1.2946511164318655, 103.77226824924365],
  [1.2945545815549335, 103.77219852542619],
  [1.294415142281743, 103.77242378699027],
  [1.2944365944781164, 103.77258468810747],
  [1.2945170402128923, 103.77269195551891],
  [1.2945974859451361, 103.7726329584426],
  [1.2946511164318655, 103.77266513866604],
  [1.2947422882567174, 103.77267050203663],
  [1.2947959187403935, 103.77275631596581],
  [1.2948710014156213, 103.77272413574235],
  [1.2948495492229373, 103.77265441192493],
  [1.2949514471366317, 103.77246669395487],
  [1.2951016124756627, 103.77236478991394],
  [1.2951659690468198, 103.77240769687857],
  [1.2951981473317813, 103.77236478991394],
  [1.2959382477731127, 103.77263832181318],
  [1.2957451781135965, 103.77300303101217],
  [1.2951874212368448, 103.7732551094291],
  [1.295273229995101, 103.77338919369343],
  [1.2958792542675974, 103.77311029842362],
  [1.2960026043230108, 103.77269195551891],
  [1.2959543369107271, 103.77253641777232],
  [1.2952785930423973, 103.77227361261424],
  [1.2953590387504565, 103.77212343823817],
  [1.295498477971715, 103.7718767231918]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);

  //Yong Loo Lin School of Medicine
  var unshadedPolygon6 = L.polygon([
  [1.297386269750097, 103.7811192153287],
  [1.2973272762783339, 103.78129084318707],
  [1.2972521936759154, 103.78125329959303],
  [1.297209289330673, 103.78137665711624],
  [1.2970054936808608, 103.78131229666933],
  [1.296984041506255, 103.78135520363392],
  [1.296817787146781, 103.78127475307534],
  [1.296496004484539, 103.7821597092199],
  [1.2962761196418218, 103.78207925866128],
  [1.2963887435880372, 103.78172527620346],
  [1.2963243870479606, 103.78168773260946],
  [1.296190310917534, 103.7820417150673],
  [1.2957398150672925, 103.7818808139501],
  [1.295611101952522, 103.78192372091468],
  [1.2953697648446676, 103.78198808136153],
  [1.295182058189345, 103.78200953484385],
  [1.2949997145679986, 103.78193444765581],
  [1.2950747972372088, 103.78168236923888],
  [1.2949889884722228, 103.7816609157566],
  [1.295064071141751, 103.7814571076748],
  [1.2952571408531484, 103.78149465126883],
  [1.2953000452314685, 103.78140883733968],
  [1.2955038410185407, 103.78148392452766],
  [1.295611101952522, 103.7812425728519],
  [1.2955467453926752, 103.78122111936958],
  [1.2954662996905701, 103.78133375015165],
  [1.2953858539859207, 103.78130156992819],
  [1.2954019431270465, 103.78126938970476],
  [1.2950962494279974, 103.78114603218157],
  [1.294940721040652, 103.78156973845687],
  [1.2947422882567174, 103.78148392452766],
  [1.2949246318965748, 103.78086713691175],
  [1.2952410517110937, 103.7809636775821],
  [1.295477025784336, 103.78103876477013],
  [1.2956647324178145, 103.78059896838309],
  [1.2959436108189968, 103.78071159916517],
  [1.295755904206192, 103.78119430251672],
  [1.2958578020834373, 103.78129084318707],
  [1.2959328847272158, 103.78125866296362],
  [1.296093776099226, 103.78077059624147],
  [1.2962493044157974, 103.78081350320605],
  [1.2962439413705493, 103.7809207706175],
  [1.2961527695997286, 103.78121575599903],
  [1.2965979023320016, 103.78136056700451],
  [1.296694437131099, 103.78110848858756],
  [1.2966729849538343, 103.78107094499352],
  [1.296705163219649, 103.78103340139954],
  [1.296748067573428, 103.78104412814065],
  [1.2967909719264816, 103.7809368607292],
  [1.2968767806304267, 103.78089395376462],
  [1.2968446023667877, 103.78076523287088],
  [1.296957226287724, 103.78066332882999],
  [1.2971663849847181, 103.78075450612974],
  [1.2971610219414165, 103.78088859039407],
  [1.2970913023775286, 103.78100658454667]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);

  //Shaw Swee Hock School of Public Health
  var unshadedPolygon7 = L.polygon([
  [1.295675458510728, 103.78017526210782],
  [1.295460936643681, 103.78007872143748],
  [1.2954180322680833, 103.7801806254784],
  [1.2954394844559582, 103.78018598884896],
  [1.2953697648446676, 103.78037370681902],
  [1.2952249625689374, 103.7804327038953],
  [1.2951284277138495, 103.78072768927687],
  [1.2950855233326286, 103.78071159916517],
  [1.2950265298072667, 103.78085641017061],
  [1.2952035103792303, 103.7809368607292],
  [1.2952571408531484, 103.78085641017061],
  [1.2952946821842102, 103.78084032005891],
  [1.2954502105498387, 103.78088322702348]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);

  //Faculty of Science
  var unshadedPolygon8 = L.polygon([
  [1.2979333000590911, 103.78074914275915],
  [1.2978314022653927, 103.78080277646487],
  [1.2978474913909974, 103.78102803802895],
  [1.297675874046057, 103.78098513106437],
  [1.2976276066657062, 103.78081350320605],
  [1.2976222436233842, 103.78073305264743],
  [1.2976973262148108, 103.78072768927687],
  [1.2975739762420027, 103.7804005236719],
  [1.2972468306328047, 103.78057751490083],
  [1.2971932002010225, 103.78050779108335],
  [1.297107391507828, 103.78034688996615],
  [1.2970054936808608, 103.78021280570181],
  [1.2969304110689006, 103.780261076037],
  [1.2970001306372285, 103.78043806726589],
  [1.2968285132348218, 103.78052388119505],
  [1.296908958893646, 103.78068478231225],
  [1.2967856088824041, 103.78075450612974],
  [1.2966890740867925, 103.78053460793623],
  [1.2966354436432042, 103.7805614247891],
  [1.2967641567059154, 103.78075986950029],
  [1.2967105262639174, 103.78097440432323],
  [1.296587176242994, 103.78094222409977],
  [1.2964852783950989, 103.78125329959303],
  [1.2963136609577823, 103.78121575599903],
  [1.296431647947185, 103.78091004387633],
  [1.296302934867566, 103.78084568342949],
  [1.296302934867566, 103.78055069804797],
  [1.2962385783253012, 103.78040588704245],
  [1.2961313174178837, 103.7801591719961],
  [1.2960133304144994, 103.78012699177266],
  [1.295965063002432, 103.78030934637215],
  [1.2957612672524579, 103.78021280570181],
  [1.2958095346684055, 103.78006799469637],
  [1.2956808215571718, 103.78000899762006],
  [1.29578808248366, 103.7796979221268],
  [1.2957022737428334, 103.7795799279742],
  [1.2955306562524527, 103.77996609065546],
  [1.2954662996905701, 103.7799982708789],
  [1.2953804909388404, 103.77997681739662],
  [1.2953858539859207, 103.78001972436118],
  [1.2952946821842102, 103.78027180277813],
  [1.295251777805801, 103.78033079985443],
  [1.295176695141845, 103.7803200731133],
  [1.29503725590289, 103.78057751490083],
  [1.294962173232573, 103.7805614247891],
  [1.2949728993284633, 103.78048633760108],
  [1.2947851926437397, 103.78044343063648],
  [1.2948549122711241, 103.780261076037],
  [1.2947798295954, 103.78023962255473],
  [1.2948441861747249, 103.78011626503152],
  [1.2948978166562506, 103.78012699177266],
  [1.2948978166562506, 103.78016453536668],
  [1.2949889884722228, 103.78019671559011],
  [1.2951284277138495, 103.77990709357917],
  [1.2952464147584537, 103.77993927380261],
  [1.2954073061740756, 103.77953702100963],
  [1.2952625039004702, 103.77948875067446],
  [1.295310771325934, 103.77934930303957],
  [1.2954877518780508, 103.7794029367453],
  [1.295514567112141, 103.77933321292784],
  [1.2954877518780508, 103.77931175944555],
  [1.2956164649990933, 103.7789202333937],
  [1.2956593693713196, 103.77893632350545],
  [1.2956486432783425, 103.77888268979967],
  [1.2955896497660846, 103.77891487002312],
  [1.2954019431270465, 103.77848043700668],
  [1.2954233953150616, 103.77845362015383],
  [1.2953912170329753, 103.77836244285407],
  [1.2954448475029112, 103.77834635274235],
  [1.2953375865618815, 103.77830344577777],
  [1.295498477971715, 103.77788510287306],
  [1.2952571408531484, 103.77781001568506],
  [1.2953268604675432, 103.77764911456784],
  [1.295627191092223, 103.77775638197932],
  [1.295600375859316, 103.77783146916734],
  [1.2956540063248374, 103.77785292264966],
  [1.2956861846036032, 103.77777247209104],
  [1.2958953434055935, 103.77782610579675],
  [1.2958631651294867, 103.7779172830965],
  [1.2959167955894357, 103.77793873657882],
  [1.2959167955894357, 103.77797628017281],
  [1.2960026043230108, 103.77801382376684],
  [1.2963351131380878, 103.77809963769602],
  [1.2963082979126743, 103.7781639981429],
  [1.2963941066329672, 103.77829808240723],
  [1.29626003050623, 103.77858234104757],
  [1.2964691892608429, 103.77867351834732],
  [1.2965067305739413, 103.7787164253119],
  [1.2965657240648258, 103.7786252480122],
  [1.2968231501908078, 103.77873251542363],
  [1.2967909719264816, 103.77885050957624],
  [1.2968338762788232, 103.77885050957624],
  [1.2970054936808608, 103.7783785329658],
  [1.2971449328114608, 103.77844289341269],
  [1.296967952375167, 103.77896850372885],
  [1.296914321937482, 103.77897386709944],
  [1.2968928697620872, 103.77902213743461],
  [1.2969304110689006, 103.77904359091687],
  [1.2968821436743263, 103.77923130888696],
  [1.2969465002002176, 103.77924739899869],
  [1.296914321937482, 103.77930103270438],
  [1.296967952375167, 103.77933321292784],
  [1.296914321937482, 103.77945120708046],
  [1.296817787146781, 103.77942975359814],
  [1.2970376719424517, 103.77989100346744],
  [1.2971342067247558, 103.77998218076719],
  [1.2973540914929336, 103.78043806726589],
  [1.2975471610297185, 103.78037370681902],
  [1.2975793392844137, 103.78029325626045],
  [1.2977026892569674, 103.78026643940758]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);
  
  //Faculty of Engineering
  var unshadedPolygon10 = L.polygon([
  [1.3004914696385446, 103.77123820242268],
  [1.3003359415829567, 103.77171554240371],
  [1.3001965026284195, 103.77176381273885],
  [1.30015359833315, 103.77172090577426],
  [1.3000892418889098, 103.77164045521569],
  [1.2999498029207472, 103.77156000465706],
  [1.3001214201112399, 103.77209634171439],
  [1.29948321862512, 103.77240741720765],
  [1.2994134991252757, 103.77243959743109],
  [1.2995690272376812, 103.7730510216764],
  [1.2985017824116778, 103.77366780929233],
  [1.2982818977432802, 103.7732333762759],
  [1.2979011218088867, 103.77293302752379],
  [1.2977509566358933, 103.7728954839298],
  [1.2981049173865384, 103.77194616733834],
  [1.2982711716614097, 103.77199980104405],
  [1.2982443564565171, 103.77209634171439],
  [1.2984052476815602, 103.77213924867897],
  [1.2985393236945988, 103.77177990285055],
  [1.298651947540067, 103.77171017903312],
  [1.298491056330736, 103.7713561965753],
  [1.2982443564565171, 103.77147955409849],
  [1.2981585477989828, 103.77160827499225],
  [1.2977992240139034, 103.7717692012484],
  [1.2976651479616166, 103.77149566934915],
  [1.2978474913909974, 103.77139912867885],
  [1.2979493891840217, 103.7711255967796],
  [1.2978421283491335, 103.7708842451038],
  [1.297868943558288, 103.77081988465693],
  [1.29906490159715, 103.77032109119361],
  [1.299172162380157, 103.77056780623998],
  [1.2991614363020652, 103.77071261724547],
  [1.2993545057008138, 103.7706268033163],
  [1.2993116013912571, 103.77046590219912],
  [1.2993169644299916, 103.7702674574879],
  [1.2995690272376812, 103.77027818422904],
  [1.2995797533140556, 103.77045517545794],
  [1.2995636641994812, 103.77061071320458],
  [1.2998157269825659, 103.7705088091637],
  [1.2997674596430662, 103.7703854516405],
  [1.2999229877336784, 103.77030500108192],
  [1.3004807435660504, 103.7704873556814],
  [1.3005451000003163, 103.7704498120874],
  [1.3007596214360164, 103.77053562601655]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);

  //School of Design and Environment
  var unshadedPolygon9 = L.polygon([
  [1.2988182017789598, 103.77029412979172],
  [1.2987163040209346, 103.77004741474539],
  [1.2979493891840217, 103.77040676057382],
  [1.297300461063429, 103.77017613563913],
  [1.2967534306176074, 103.76996160081622],
  [1.296533545797243, 103.77063738550842],
  [1.296796334970572, 103.77071783606704],
  [1.2967802458383009, 103.77115226908344],
  [1.2966837110424985, 103.77145798120615],
  [1.2971771110712704, 103.77162424569391],
  [1.297209289330673, 103.77150088817072],
  [1.2972575567190134, 103.77150625154128],
  [1.297316550192405, 103.7712648998655],
  [1.2975525240721932, 103.77132389694182],
  [1.2976061544963546, 103.77111472548945],
  [1.2975310719022182, 103.77105572841316],
  [1.297563250157117, 103.77089482729596],
  [1.2976222436233842, 103.77089482729596],
  [1.2976383327502994, 103.77081437673735],
  [1.2978474913909974, 103.77087337381364],
  [1.297927937017418, 103.77066956573188],
  [1.297965478308863, 103.77068565584361]
  ], {
    color: '#00008B',
    weight: 2,
    fillOpacity: 0
  }).addTo(map);

  
  //Central Library
  var polygon1 = L.polygon([
    [1.2970537610730943, 103.77367373113053],
    [1.2972307415033832, 103.77373808736458],
    [1.297139569768121, 103.77399551230079],
    [1.2970323088988829, 103.77395797116424],
    [1.297016219768113, 103.77399014928127],
    [1.2966086284209712, 103.77383998473516],
    [1.2967266153966337, 103.77352356658444],
    [1.2966783479981665, 103.77351284054542],
    [1.296705163219649, 103.77344312129186],
    [1.2966247175543364, 103.77341630619435],
    [1.2966086284209712, 103.77347529940891],
    [1.2964638262160655, 103.77341630619435],
    [1.2964799153503597, 103.77328223070677],
    [1.2960347825973366, 103.77312670314112],
    [1.2961956739628837, 103.77267084648332],
    [1.2966568958207743, 103.77283173706846],
    [1.2966354436432042, 103.77290145632199],
    [1.296694437131099, 103.7729175453805],
    [1.2966890740867925, 103.77294972349752],
    [1.2966408066876127, 103.772933634439],
    [1.2966461697320084, 103.77296044953653],
    [1.2968124241027414, 103.77304089482908],
    [1.2968231501908078, 103.77300335369254],
    [1.2967427045292483, 103.77297653859502],
    [1.2967909719264816, 103.77285855216597],
    [1.2969894045499128, 103.77292827141949],
    [1.296967952375167, 103.77300871671206],
    [1.297107391507828, 103.7730623469071],
    [1.2970859393340743, 103.77313206616063],
    [1.297209289330673, 103.77318569635568],
    [1.297182474114534, 103.77328223070677],
    [1.2972146523738728, 103.77329831976529],
    [1.2971985632442606, 103.77335194996029],
    [1.2972253784602343, 103.77336803901882],
    [1.2971502958547878, 103.77358792281846],
    [1.2970913023775286, 103.77357183375999]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon1.bindPopup(
    `<em><b>Central Library<br><img src="images/centrallibrary.jpg" alt="Central Library" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Hong Yeow:</b>"The library is nicely air-conditioned, and pretty quiet especially earlier in the mornings. I often study here before classes, and visit The Soup Spoon right downstairs to grab lunch. Definitely gets busier during project submissions and exam periods."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(3, 5)}<br>
     <b>Average Time Spent</b>: 3 hours/week`
  );

  polygon1.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER });
    this.openPopup();
  });

  polygon1.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });
  
  //Mochtar Riady Building
  var polygon2 = L.polygon([
    [1.2926406682847937, 103.77376019954683],
    [1.2927318139513266, 103.77394258975984],
    [1.2926621143242878, 103.77417325973512],
    [1.2925709686552487, 103.77443075180055],
    [1.2923297006920422, 103.77452731132509],
    [1.2922760855859792, 103.77439320087433],
    [1.2923618697551127, 103.77413570880891],
    [1.2923404237131124, 103.77404987812042],
    [1.2924959075135973, 103.7738084793091]
  ], {
    color: '#000000',
    fillColor: COLOR_RED,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon2.bindPopup(
    `<em><b>Mochtar Riady Building, Biz 1<br><img src="images/mochtarriady.jpg" alt="Mochtar Riady Building" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Ryan: </b>"Biz 1 is a very common place that business students would visit because we would have quite a few classes here. To me, this is also the place where I spent a lot of time; apart from classes, I have had coffee chats with seniors and mentors at the Spread Cafe, project sessions at the study pods, and CCA sessions in the seminar rooms."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(3, 5)}<br>
     <b>Average Time Spent</b>: 9 hours/week`
  );

  polygon2.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon2.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_RED});
    this.closePopup();
  });

  //The Deck
  var polygon3 = L.polygon([
    [1.2948441861747249, 103.77265985332583],
    [1.2948763644637828, 103.7727188465404],
    [1.2947959187403935, 103.77277247673544],
    [1.2947422882567174, 103.77268130540386],
    [1.2946403903346138, 103.77267057936486],
    [1.2945921228963895, 103.77262231218933],
    [1.2945224032617915, 103.77269203144289],
    [1.2944580466743119, 103.77263840124785],
    [1.2944205053308457, 103.7725740450138],
    [1.294399053134345, 103.7724292434872],
    [1.2945331293595521, 103.77219863364853],
    [1.2946350272859688, 103.77228444196058],
    [1.2946993838689702, 103.77225761147929],
    [1.294645753383246, 103.77216107712822],
    [1.2946028489938575, 103.77218252920622],
    [1.2945116771639928, 103.7721181729722],
    [1.2945545815549335, 103.77210208391367],
    [1.2945331293595521, 103.77204309069913],
    [1.2947315621598474, 103.77194119332853],
    [1.2947851926437397, 103.7720323646601],
    [1.2947691034986955, 103.77204845371863],
    [1.2949514471366317, 103.77247749527896]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon3.bindPopup(
    `<em><b>The Deck<br><img src="images/thedeck.jpg" alt="The Deck" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Hong Yeow: </b>"A nice food hotspot! The top level was undergoing renovations a little while back, but there are still plenty of stalls open. I always get myself the curry katsu don from the Japanese stall before our GEX1003 lectures.<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 1 hour/week`
  );

  polygon3.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon3.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //Shaw Foundation Building
  var polygon4 = L.polygon([ 
  [1.2946889910541812, 103.77099215984346],
  [1.2945924839522063, 103.771271109581],
  [1.2944316387740762, 103.77121746540071],
  [1.2944423617862661, 103.77116918563844],
  [1.2942761550921875, 103.77111554145813],
  [1.294195732494357, 103.7713408470154],
  [1.2939598261927046, 103.77125501632692],
  [1.2940616948256656, 103.77097070217134],
  [1.2941421174277454, 103.77100288867952],
  [1.2941903709877594, 103.77090096473695],
  [1.2942868781050392, 103.77092242240907],
  [1.2943083241305897, 103.7708741426468]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon4.bindPopup(
    `<em><b>Shaw Foundation Building<br>Hong Yeow: </b>"Weekly GEX1033 lectures are held here. There's an interesting map right outside the classrooms made with different coloured mosses, attached with a quote by Gandhi, which we got to explore during one of our GEX1003 lectures!<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(2, 5)}<br>
     <b>Average Time Spent</b>: 2 hours/week`
  );

  polygon4.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon4.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });

  //HSSML
  var polygon5 = L.polygon([
  [1.2929242141893083, 103.77475798130035],
  [1.2926989659840635, 103.77431809902193],
  [1.2928866728231585, 103.77422153949739],
  [1.2929081250324579, 103.77426445484163],
  [1.2929671186070801, 103.77423763275146],
  [1.292951029450497, 103.77416253089906],
  [1.2930851057522408, 103.7740981578827],
  [1.2931065579598608, 103.774151802063],
  [1.2931280101672902, 103.77413570880891],
  [1.2931923667885217, 103.77424836158752],
  [1.2932781756142946, 103.77424836158752],
  [1.2933318061289238, 103.77437710762025],
  [1.2932942647687915, 103.77440929412843],
  [1.2932728125627617, 103.77438247203827],
  [1.2931923667885217, 103.77442002296449],
  [1.2931816406850998, 103.77439320087433],
  [1.293117284063601, 103.77442002296449],
  [1.2932352712017645, 103.77469897270204],
  [1.2930904688041682, 103.77477407455446],
  [1.293069016596408, 103.77473115921022],
  [1.2930046599720468, 103.77476871013641],
  [1.2929778447114182, 103.77473652362823]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon5.bindPopup(
    `<em><b>Hon Sui Sen Memorial Library<br><img src="images/hssml.jpg" alt="HSSML" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Ryan: </b>"My friends and I would always study here before any major exams or submissions. This place is usually filled with a lot of students studying, so the atmosphere is quite tense. However, despite that, I do still have a lot of good memories with my friends here, where we would spend most of our time together in school."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(3, 5)}<br>
     <b>Average Time Spent</b>: 2 hours/week`
  );

  polygon5.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon5.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });

  //CDE Buzzy Kitchen
  var polygon6 = L.polygon([
  [1.3005236478557476, 103.77045571804048],
  [1.3007542584003482, 103.77053618431093],
  [1.3005451000003163, 103.77107262611389],
  [1.3003413046195027, 103.77100288867952],
  [1.3002984003267268, 103.77099752426149],
  [1.300330578546385, 103.77092778682709],
  [1.3002179547757744, 103.77087950706483],
  [1.3001750504808738, 103.77095460891725],
  [1.3002286808493755, 103.77106189727783],
  [1.3001696874439588, 103.77120673656465],
  [1.299965892032841, 103.77113699913026],
  [1.3000141593685495, 103.77091705799103],
  [1.300116057074223, 103.77094388008119],
  [1.30015359833315, 103.77086341381074],
  [1.300110694037168, 103.7708204984665],
  [1.2999444398833613, 103.77091169357301],
  [1.2999015355838173, 103.77087950706483],
  [1.2998425421707671, 103.77091705799103],
  [1.2998050009071964, 103.77082586288454],
  [1.2999980702567484, 103.77072393894197],
  [1.2999068986213047, 103.77051472663881],
  [1.299821090020219, 103.77054691314699],
  [1.2997620966052732, 103.77039670944214],
  [1.2997889117940595, 103.77037525177002],
  [1.2998103639448748, 103.7704074382782],
  [1.2998371791331396, 103.7704074382782],
  [1.2998157269825659, 103.77036452293396],
  [1.2999229877336784, 103.77031087875368],
  [1.3004646544572263, 103.77049863338472]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon6.bindPopup(
    `<em><b>CDE BUZZy Kitchen<br><img src="images/cdebuzzy.jpg" alt="HSSML" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Ryan: </b>"I was part of the NUS Bakers & Cooks CCA, and my team and I would organise culinary events here at the CDE BUZZy kitchen. I had a lot of fond memories with my CCA friends and the different participants who joined our events. This was also a form of stress relief for me, to take some time away from academics and to enjoy what I am interested in."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 2 hours/week`
  );

  polygon6.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon6.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //University Health Centre
  var polygon7 = L.polygon([
  [1.2992847861974202, 103.77618951312864],
  [1.2991292580674962, 103.77613587942287],
  [1.29906490159715, 103.77626996368721],
  [1.2989951820857542, 103.77624851020497],
  [1.2989415516910703, 103.77633968750466],
  [1.2990112712039419, 103.77636650435755],
  [1.298973729928018, 103.77647913513957],
  [1.2988771952159277, 103.776436228175],
  [1.2988128387391695, 103.77663467288623],
  [1.299048812479306, 103.77670976007423],
  [1.2991614363020652, 103.77643086480441],
  [1.2992847861974202, 103.77646304502787],
  [1.2992955122749905, 103.77636650435755],
  [1.2992311558088683, 103.77633432413411]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);
  
  polygon7.bindPopup(
    `<em><b>University Health Centre<br>Elvia: </b>"Place to visit when falling sick üôÅ Most of the time caused by stress. Also, visiting UHC means missing class, stressed."<br><br></em>
    <b>Stress Rating:</b><br> ${generateStressBar(3, 5)}<br>
    <b>Average Time Spent</b>: 0.5 hours/week
  `);
  
  polygon7.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });
  polygon7.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });

  //Education Resources Centre
  var polygon8 = L.polygon([
  [1.3054040060422802, 103.77305688992108],
  [1.305473725376392, 103.77298180273306],
  [1.3055219926065698, 103.77273508768668],
  [1.305607801013489, 103.77267072723981],
  [1.3057150615180322, 103.77269218072209],
  [1.3058008699183614, 103.77262782027523],
  [1.3058330480677294, 103.77255809645776],
  [1.3060958362721726, 103.77257418656947],
  [1.3062299118760903, 103.77267072723981],
  [1.306299631187302, 103.77264927375751],
  [1.3065195151561302, 103.77282626498642],
  [1.3065302412029, 103.77288526206272],
  [1.3065141521327388, 103.77292816902731],
  [1.3064390698039117, 103.77293889576848],
  [1.3063639874728452, 103.77308370677395],
  [1.3063425353778424, 103.77309979688567],
  [1.3061494665145845, 103.77301398295651],
  [1.306106562320749, 103.77306761666222],
  [1.3061011992964546, 103.7730890701445],
  [1.3057686917685862, 103.77326606137345],
  [1.3056667942915565, 103.77304616317991],
  [1.3056721573167671, 103.77321242766769],
  [1.3054576362994625, 103.77328215148515]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon8.bindPopup(
    `<em><b>Education Resources Centre<br><img src="images/erc.jpg" alt="Central Library" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Elvia: </b>"Going together with friends to study / revise. A certain extent of stress because the main aim is to study. But still had a lot of fun for the activities, shops and nice views there."<br><br></em>
    <b>Stress Rating:</b><br> ${generateStressBar(2, 5)}<br>
    <b>Average Time Spent</b>: 3 hours/week
  `);

  polygon8.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon8.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });
  
  //The Terrace
  var polygon9 = L.polygon([
  [1.2944634097233259, 103.77420997793332],
  [1.2945277663106782, 103.7742957918625],
  [1.2946189381399704, 103.7743118819742],
  [1.2946886577719092, 103.7743816057917],
  [1.2947101099659675, 103.77450496331485],
  [1.2946886577719092, 103.77460686735571],
  [1.2946350272859688, 103.77466050106149],
  [1.2945813967988833, 103.77464977432031],
  [1.2945116771639928, 103.7746122307263],
  [1.2944419575271813, 103.7746015039852],
  [1.2943829639868454, 103.77457468713229],
  [1.2943186073958162, 103.77456396039115],
  [1.2942542508031587, 103.7745585970206],
  [1.29420062030802, 103.77456396039115],
  [1.2941738050600244, 103.7745371435383],
  [1.2941630789607625, 103.77451569005599],
  [1.2940772701649124, 103.77454787027942],
  [1.2939968244161677, 103.77434406219766],
  [1.2943615117900138, 103.77416707096873]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon9.bindPopup(
    `<em><b>The Terrace<br><img src="images/terrace.jpg" alt="The Terrace" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Elvia: </b>"Good place to have lunch with friends (especially those from COM). near to both COM and biz. A lot of memories with friends with little stress."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 1 hour/week`
  );

  polygon9.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon9.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //Medicine+Science Library
  var polygon10 = L.polygon([
  [1.2954180322680833, 103.7816083431244],
  [1.295455573596766, 103.78147423267366],
  [1.2953000452314685, 103.78139913082123],
  [1.2952410517110937, 103.78150105476381],
  [1.29506943418948, 103.78145277500154],
  [1.294978262376396, 103.7816995382309],
  [1.295064071141751, 103.7816995382309],
  [1.2950265298072667, 103.78193557262422],
  [1.2954019431270465, 103.78199458122255],
  [1.295514567112141, 103.78191947937012],
  [1.295627191092223, 103.78173708915712]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);
  
  polygon10.bindPopup(
  `<em><b>Medicine+Science Library<br><img src="images/medicine.png" alt="Medicine+Science Library" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Jolin: </b>"The atmosphere is very serious and tense as there are many smart students studying. This motivates me to lock in."<br><br></em>
  <b>Stress Rating:</b><br> ${generateStressBar(3, 5)}<br>
  <b>Average Time Spent</b>: 3 hours/week
`);

  
  polygon10.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });
  polygon10.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });

  //UTown
  var polygon11 = L.polygon([
  [1.3045137436059147, 103.773792386055],
  [1.3046639083763008, 103.77443075180055],
  [1.303720015384964, 103.77507448196413],
  [1.3034089596625535, 103.774151802063],
  [1.304159783754514, 103.77365291118623]
  ], {
    color: '#000000',
    fillColor: COLOR_RED,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon11.bindPopup(
    `<em><b>UTown<br>Jolin: </b>"I have lessons with my crush here every week, so I feel very stressed out when i am with him"<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(5, 5)}<br>
     <b>Average Time Spent</b>: 6 hours/week`
  );

  polygon11.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon11.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_RED});
    this.closePopup();
  });

  //CoolSpot
  var polygon12 = L.polygon([
  [1.2941845311592481, 103.77391576766968],
  [1.2941523528614371, 103.77406597137453],
  [1.2943454226422724, 103.77414107322694],
  [1.2943883270360246, 103.77400159835817]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon12.bindPopup(
    `<em><b>CoolSpot<br><img src="images/coolspot.jpg" alt="CoolSpot" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br?Jolin: </b>"Iconic milocino sold by a young guy with photogenic memory. He remembered our orders after seeing us twice only. His milocino is extra concentrated so its very yummy."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 1 hours/week`
  );

  polygon12.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon12.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //Coffee Roasters
  var polygon13 = L.polygon([
  [1.2962707565966372, 103.77203285694124],
  [1.2959972412772411, 103.77190947532655],
  [1.295798808576052, 103.77251029014587],
  [1.296093776099226, 103.77269804477692]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon13.bindPopup(
    `<em><b>The Coffee Roasters<br><img src="images/coffeeroaster.jpg" alt="The Coffee Roaster" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Sateiish:</b> "Good place to study in silence but also with the smell of coffee wafting by. Chosen because it is where I spent most of my time studying as a freshman. Not stressful because I enjoy the ambience and environment."</em><br><br>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 3 hours/week`
  );

  polygon13.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon13.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //AS4
  var polygon14 = L.polygon([
  [1.294404416183486, 103.77129793167116],
  [1.2946832947233662, 103.77193629741669],
  [1.2945653076525414, 103.77198994159698],
  [1.294275703000881, 103.77135157585145]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon14.bindPopup(
    `<em><b>AS4<br>Sateiish:</b> "My friend is a cat feeder with NUS cat cafe and I accompany him weekly when he feeds one of the cats at AS4. We usually spend 1.5 hr a week here. The cat‚Äôs name is M33y Thai and he is in the garden at the department of social work, and is an attraction in and of himself."</em><br><br>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 1.5 hours/week`
  );

  polygon14.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon14.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //Biz2
  var polygon15 = L.polygon([
  [1.293970009166022, 103.7745648622513],
  [1.294039728815823, 103.77472579479218],
  [1.2935463281761175, 103.77491891384126],
  [1.2933854366424333, 103.77474188804628]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon15.bindPopup(
    `<em><b>Biz 2<br><img src="images/biz2.jpg" alt="Biz2" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Sateiish:</b> "2 of my modules are here so I spend a considerable time in Biz 2. It is more rugged looking than Biz1 as its a much older building, it looks more like FASS and does not feel as welcoming."</em><br><br>
     <b>Stress Rating:</b><br> ${generateStressBar(3, 5)}<br>
     <b>Average Time Spent</b>: 1.5 hours/week`
  );

  polygon15.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon15.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });

  //UTown Auditorium
  var polygon16 = L.polygon([
      [1.3043206746022415, 103.77225279808046],
  [1.3047389907581415, 103.77276241779329],
  [1.304626367184547, 103.77291262149812],
  [1.3045727369096298, 103.77291262149812],
  [1.3045727369096298, 103.77295553684236],
  [1.3044172091059165, 103.77315938472749],
  [1.304411846078034, 103.77321302890779],
  [1.3042938594616598, 103.77325594425203],
  [1.3038701802027275, 103.77297163009645],
  [1.3039988928965196, 103.77276778221132],
  [1.30420805100992, 103.772891163826],
  [1.304025708040231, 103.77270877361299]
  ], {
    color: '#000000',
    fillColor: COLOR_RED,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon16.bindPopup(
    `<em><b>UTown Auditorium<br><img src="images/utownaudi.jpg" alt="UTown Auditorium" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Ryan: </b>"I remembered back in year 1, I had a GE module held here in the UTown Auditorium. It was an interesting module on public health, but what made it memorable was that during one of the sessions, each group had to send one member up on stage to do a quick presentation. I was selected through a game of rock paper scissors and had to do the presentation. Being a year 1 and fresh in NUS, naturally that became a very stressful experience for me, but nonetheless, it was a great learning experience. "<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(4, 5)}<br>
     <b>Average Time Spent</b>: 2 hours/week`
  );

  polygon16.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER });
    this.openPopup();
  });

  polygon16.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_RED});
    this.closePopup();
  });

  //Valour House
  var polygon17 = L.polygon([
  [1.3008887971796022, 103.77451658248903],
  [1.300642168516196, 103.77532660961153],
  [1.3004062628156303, 103.77536952495576],
  [1.3001596341051012, 103.77466678619386],
  [1.3003740938547321, 103.77458631992342],
  [1.3006582529949848, 103.77437710762025]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon17.bindPopup(
    `<em><b>Valour House<br><img src="images/utownaudi.jpg" alt="Valour House" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Hong Yeow: </b>"I visited here recently to meet up with a friend. The view's pretty magnificent from high up, and the residential area overlooks the University Sports Centre. Really nice place to indulge in sports since the Sports Centre is nearby. It's one of the newest residential housing in the NUS campus, although lodging costs are on the pricier side."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 0.5 hours/week`
  );

  polygon17.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER });
    this.openPopup();
  });

  polygon17.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //Techno Edge
  var polygon18 = L.polygon([
  [1.2982389332396271, 103.77142667770386],
  [1.2981853182586107, 103.77154469490053],
  [1.2981531492694565, 103.77153396606447],
  [1.2981531492694565, 103.77159833908082],
  [1.2978046518606505, 103.77176463603975],
  [1.2976759758821892, 103.77149641513826],
  [1.297852905350883, 103.77141058444978],
  [1.2978636283485951, 103.77138376235963],
  [1.2977885673637197, 103.77134621143342],
  [1.2978100133596147, 103.7712872028351],
  [1.2978797128450679, 103.77131402492525],
  [1.297895797341439, 103.771271109581]
  ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon18.bindPopup(
    `<em><b>Techno Edge<br><img src="images/techno.png" alt="Techno Edge" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Hong Yeow: </b>"I heard from a friend from one of my courses that this canteen's hands down the best across the NUS campus. I didn't believe him until I went there with a couple of friends. The food made my stress levels from studying melt right away. It is extremely crowded during lunchtime, so be there early."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 1 hours/week`
  );

  polygon18.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER });
    this.openPopup();
  });

  polygon18.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //E5
  var polygon19 = L.polygon([
    [1.2979020306191058, 103.77293407917024], 
    [1.2977519086493803, 103.77287507057191], 
    [1.29809504456711, 103.77194702625275], 
    [1.2982719740064792, 103.77200067043304] 
    ], {
    color: '#000000',
    fillColor: COLOR_RED,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon19.bindPopup(
    `<em><b>E5<br><img src="images/e5.jpg" alt="E5" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Hong Yeow: </b>"E5's a long walkway with lots of tables. People often study or work on group projects over here. Consultations with lecturers and professors typically happen here as well, since it is of close proximity to their offices. It always gets my stress levels up whenever I walk past"<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(4, 5)}<br>
     <b>Average Time Spent</b>: 0.25 hours/week`
  );

  polygon19.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER });
    this.openPopup();
  });

  polygon19.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_RED});
    this.closePopup();
  });

  //Yusof Ishak House (YIH)
  var polygon20 = L.polygon([
  [1.2984106107222155, 103.77414643764497],
  [1.298233630374494, 103.77423763275146],
  [1.2982979868660098, 103.77434492111207],
  [1.2981746369224882, 103.77442538738251],
  [1.2982443564565171, 103.77458631992342],
  [1.2983194390294963, 103.77454876899719],
  [1.2983516172743448, 103.77458095550537],
  [1.2982926238251127, 103.77461314201355],
  [1.2983623433558973, 103.77477943897247],
  [1.2982711716614097, 103.77476871013641],
  [1.2983194390294963, 103.77482235431673],
  [1.2982282673334569, 103.77490282058716],
  [1.29832480207033, 103.7750905752182],
  [1.2987699344204022, 103.77493500709534],
  [1.2987538453006877, 103.77491354942322],
  [1.2988503800174724, 103.77486526966096],
  [1.2987860235400275, 103.77471506595613],
  [1.2987163040209346, 103.77474188804628],
  [1.2986894888207745, 103.77463459968568],
  [1.2986465844999333, 103.77465069293977]
    ], {
    color: '#000000',
    fillColor: COLOR_GREEN,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon20.bindPopup(
    `<em><b>Yusof Ishak House (YIH)<br><img src="images/yih.jpg" alt="Yusof Ishak House (YIH)" style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Ryan: </b>"YIH used to be very different back when I was in year 1, it was recently renovated and there are a lot of facilities and food options in the area. It is a quiet and tranquil area and I would come to YIH sometimes to grab lunch and catch up with friends. It is overall a relaxing place with great atmosphere. A funny story I have with YIH is when Chagee first opened their store here, they ran an opening promotion deal and my friend and I ended up waiting over 6 hours for our tea order!"<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(1, 5)}<br>
     <b>Average Time Spent</b>: 1 hour/week`
  );

  polygon20.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER });
    this.openPopup();
  });

  polygon20.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_GREEN});
    this.closePopup();
  });

  //Multi Purpose Sports Hall (MPSH) 1-5 
  var polygon21 = L.polygon([
  [1.300662287684064, 103.77558148077817],
  [1.3010484262372692, 103.77571559122892],
  [1.3007802744704706, 103.77647197417112],
  [1.3005282117837058, 103.77637541464658],
  [1.300608657324773, 103.77615010908934],
  [1.3005872051807386, 103.77615010908934],
  [1.3003887728397918, 103.77663290671201],
  [1.3001367101139314, 103.77649879626127],
  [1.3002922381818092, 103.77606427840085],
  [1.3000455384834875, 103.77558148077817],
  [1.3002707860350775, 103.77540445498319],
  [1.3005013966027945, 103.77581215075345],
  [1.3005818421447015, 103.77581215075345]
  ], {
    color: '#000000',
    fillColor: COLOR_RED,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon21.bindPopup(
    `<em><b>Multi Purpose Sports Hall (MPSH) 1-5 , Biz 1<br><img src="images/mpsh.jpg" alt="Multi Purpose Sports Hall (MPSH) 1-5 " style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Ryan: </b>"Most stressful place ever in NUS! Most of my final exams are held here throughout my academic life, and I have only ever visited this area for exams. The stress is amplified when you see everyone reading theirs notes and practice papers right outside the hall before the paper begins. 10/10 would not recommend. However, apart from exams season, this area is generally used for sports and recreational activities."<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(5, 5)}<br>
     <b>Average Time Spent</b>: 2 hours/week`
  );

  polygon21.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon21.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_RED});
    this.closePopup();
  });

  //Sheares Hall 
  var polygon22 = L.polygon([
  [1.2911651324363347, 103.77503156661989],
  [1.2916370813188631, 103.77519786357881],
  [1.2915083679959574, 103.7756270170212],
  [1.2914761896642162, 103.77573966979982],
  [1.2915137310512177, 103.77580940723419],
  [1.2914011068885591, 103.77614200115204],
  [1.291009603808107, 103.77593815326692],
  [1.2910846865953414, 103.77599179744722],
  [1.2910310560332583, 103.77610981464387],
  [1.2908058076601947, 103.77603471279146],
  [1.2909023426796538, 103.775771856308],
  [1.2909398840751283, 103.77579331398012],
  [1.2909666993572702, 103.77569675445558],
  [1.2909237949057208, 103.77569139003755],
  [1.290955973244459, 103.77555191516878],
  [1.2909935146391323, 103.77546608448029]
  ], {
    color: '#000000',
    fillColor: COLOR_YELLOW,
    fillOpacity: 0.5,
    weight: 2
  }).addTo(map);

  polygon22.bindPopup(
    `<em><b>Sheares Hall , Biz 1<br><img src="images/sheares.jpg" alt="Sheares Hall " style="width: 200px; border-radius: 8px; margin-bottom: 8px;" /><br>Ryan: </b>"Even though I don't stay on campus, I have many friends who did and they would often invite me over to their hall in between classes. My memories of this place includes mugging for exams, hitting the gym, and just chilling out with some friends over dinner. I was also sometimes invited to join their hall CCA sessions where I got to meet new people and make friends. "<br><br></em>
     <b>Stress Rating:</b><br> ${generateStressBar(2, 5)}<br>
     <b>Average Time Spent</b>: 0.5 hours/week`
  );

  polygon22.on('mouseover', function () {
    this.setStyle({ fillColor: COLOR_MOUSEOVER});
    this.openPopup();
  });

  polygon22.on('mouseout', function () {
    this.setStyle({ fillColor: COLOR_YELLOW});
    this.closePopup();
  });
  
function createFacultyIcon(id, imgSrc, label) {
  return L.divIcon({
    html: `
      <div id="${id}-wrapper"
           style="
             text-align: center;
             transition: opacity 0.8s ease, transform 0.8s ease;
           ">
        <img id="${id}-img"
             src="${imgSrc}"
             style="
               width: 60px;
               height: 40px;
               transform-origin: center;
               opacity: 1;
               transform: scale(1);
               display: block;
               margin: 0 auto;
             ">
        ${
          label
            ? `<span style="
                 display: block;
                 font-size: 12px;
                 font-weight: 600;
                 color: #333;
                 margin-top: 2px;
                 font-family: sans-serif;
               ">${label}</span>`
            : ''
        }
      </div>
    `,
    iconSize: [75, 75],
    iconAnchor: [30, 20],
    className: ''
  });
}

var businessMarker = L.marker([1.2929315399051828, 103.77392649650575], {
  icon: createFacultyIcon('business', 'images/business.png', 'NUS Business School')
}).addTo(map);

var computerMarker = L.marker([1.2950751428632135, 103.773609995842], {
  icon: createFacultyIcon('computer', 'images/pc.png', 'School of Computing')
}).addTo(map);

var scienceMarker = L.marker([1.2968074113133805, 103.7802028656006], {
  icon: createFacultyIcon('science', 'images/laboratory.png', 'Faculty of Science')
}).addTo(map);

var artMarker = L.marker([1.2950217206868495, 103.7709492444992], {
  icon: createFacultyIcon('art', 'images/palette.png', 'Faculty of Arts and Social Sciences')
}).addTo(map);

var engineeringMarker = L.marker([1.3003738639522173, 103.77127647399904], {
  icon: createFacultyIcon('engineering', 'images/adjustable-wrench.png', 'School of Design and Environment')
}).addTo(map);


map.on('zoomend', function () {
  var currentZoom = map.getZoom();
  ['business', 'computer', 'science', 'art', 'engineering'].forEach(id => {
    var wrapper = document.getElementById(id + '-wrapper');
    if (wrapper) {
      if (currentZoom > 16) {
        wrapper.style.opacity = '0';
        wrapper.style.transform = 'scale(0.8)';
      } else {
        wrapper.style.opacity = '1';
        wrapper.style.transform = 'scale(1)';
      }
    }
  });
});






  // Leaflet Draw Setup
  var drawnItems = new L.FeatureGroup();
  map.addLayer(drawnItems);

  var drawControl = new L.Control.Draw({
    draw: {
      polygon: {
        allowIntersection: false,
        showArea: true,
        shapeOptions: {
          color: '#FF0000',
          fillColor: '#FFA07A',
          fillOpacity: 0.5
        }
      },
      polyline: false,
      rectangle: false,
      circle: false,
      marker: false,
      circlemarker: false
    },
    edit: false 
  });
  
    map.addControl(drawControl);
  
    // Handle drawing completion
    map.on(L.Draw.Event.CREATED, function (event) {
      var layer = event.layer;
      drawnItems.addLayer(layer);
  
      var latlngs = layer.getLatLngs()[0];
  
      var formattedCoords = latlngs.map(function(latlng) {
        return `[${latlng.lat}, ${latlng.lng}]`;
      });
  
      var result = `[\n  ${formattedCoords.join(',\n  ')}\n]`;
  
      copyToClipboard(result);
      console.log("Copied Polygon Coordinates:\n", result);
    });
  
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(function () {
        showNotice();
      }).catch(function (err) {
        alert('Failed to copy coordinates: ' + err);
      });
    }
  
    function showNotice() {
      var notice = document.getElementById('copy-notice');
      notice.style.display = 'block';
      setTimeout(() => {
        notice.style.display = 'none';
      }, 2000);
    }

      const legend = L.control({ position: 'bottomright' });
      legend.onAdd = function () {
      const div = L.DomUtil.create('div', 'info legend');
      div.innerHTML = `
        <b>Stress Levels</b><br>
        <i style="background:${COLOR_GREEN};width:18px;height:18px;display:inline-block;margin-right:5px;border-radius:3px;"></i> Not Stressful<br>
        <i style="background:${COLOR_YELLOW};width:18px;height:18px;display:inline-block;margin-right:5px;border-radius:3px;"></i> Moderately Stressful<br>
        <i style="background:${COLOR_RED};width:18px;height:18px;display:inline-block;margin-right:5px;border-radius:3px;"></i> Very Stressful
        <hr style="margin:6px 0;border:none;border-top:1px solid #ccc;">
        <small style="color:#555;display:block;text-align:left;">
          <em>Note:</em>Icons indicate approximate faculty locations.
        </small>
      `;
      div.style.background = 'white';
      div.style.padding = '8px';
      div.style.borderRadius = '5px';
      div.style.fontFamily = 'sans-serif';
      div.style.fontSize = '13px';
      div.style.lineHeight = '22px';
      div.style.boxShadow = '0 0 5px rgba(0,0,0,0.3)';
      return div;
    };
    legend.addTo(map);
  </script> 
</body> 
</html>
